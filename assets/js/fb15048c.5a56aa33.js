"use strict";(self.webpackChunkapi_laravel_doc=self.webpackChunkapi_laravel_doc||[]).push([[180],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>g});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),p=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},c=function(e){var a=p(e.components);return n.createElement(l.Provider,{value:a},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return t?n.createElement(g,o(o({ref:a},c),{},{components:t})):n.createElement(g,o({ref:a},c))}));function g(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=m;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=t[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7152:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=t(7462),r=(t(7294),t(3905));const i={sidebar_position:20},o="Despliegue",s={unversionedId:"despliegue",id:"despliegue",title:"Despliegue",description:"Introducci\xf3n",source:"@site/docs/despliegue.md",sourceDirName:".",slug:"/despliegue",permalink:"/api_vinos_doc/docs/despliegue",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/despliegue.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{sidebar_position:20},sidebar:"tutorialSidebar",previous:{title:"Generando recursos",permalink:"/api_vinos_doc/docs/Moonshine/recursos"}},l={},p=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"Procedimiento",id:"procedimiento",level:2},{value:"Creaci\xf3n de la base de datos",id:"creaci\xf3n-de-la-base-de-datos",level:3},{value:"Creaci\xf3n de la aplicaci\xf3n",id:"creaci\xf3n-de-la-aplicaci\xf3n",level:3}],c={toc:p},d="wrapper";function u(e){let{components:a,...i}=e;return(0,r.kt)(d,(0,n.Z)({},c,i,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"despliegue"},"Despliegue"),(0,r.kt)("h2",{id:"introducci\xf3n"},"Introducci\xf3n"),(0,r.kt)("p",null,"En el presente cap\xedtulo veremos c\xf3mo efectuar un despliegue de nuestro proyecto en Internet, para que pueda ser visible por todo el mundo. Para poder llevar a cabo este proceso con \xe9xito, deberemos contemplar varios requisitos. Para nuestro ejemplo, utilizaremos el proveedor de servicios ",(0,r.kt)("strong",{parentName:"p"},"Railway"),", que, si bien no es gratuito a fecha de hoy ",(0,r.kt)("strong",{parentName:"p"},"(marzo 2024)"),", cuenta con planes a partir de 5 \u20ac, suficiente para desplegar nuestros proyectos de prueba. Para m\xe1s informaci\xf3n, consulte al proveedor. Si\xe9ntase libre de escoger otros planes o proveedores que sean de su agrado. Tambi\xe9n deber\xe1 contar con una cuenta en ",(0,r.kt)("strong",{parentName:"p"},"GitHub")," y un repositorio. Adem\xe1s, aseg\xfarese de que su proveedor cuente con la versi\xf3n ",(0,r.kt)("strong",{parentName:"p"},"PHP 8.2")," o superior y, por supuesto, con una base de datos relacional ",(0,r.kt)("strong",{parentName:"p"},"MySQL")," para este ejemplo. Aunque Laravel permite la conexi\xf3n con otras bases de datos relacionales, como ",(0,r.kt)("em",{parentName:"p"},"PostgreSQL, SQL Server y SQLite"),", para m\xe1s detalles consulte la documentaci\xf3n oficial de ",(0,r.kt)("strong",{parentName:"p"},"Laravel"),"."),(0,r.kt)("h2",{id:"procedimiento"},"Procedimiento"),(0,r.kt)("h3",{id:"creaci\xf3n-de-la-base-de-datos"},"Creaci\xf3n de la base de datos"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Una vez dado de alta como uauario e inicida sessi\xf3n, pule en el bot\xf3n ",(0,r.kt)("strong",{parentName:"li"},"Start New Project"),".")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(223).Z,width:"1360",height:"768"})),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Una vez pulsado el bot\xf3n deber\xe1 aparecerle la siguinente pantalla.\nEn el desplegable que aparece en pantalla, deber\xe1 escoger la opci\xf3n ",(0,r.kt)("strong",{parentName:"li"},"Provision MySQL"),". Esta opci\xf3n nos permitir\xe1 crear y montar nuestra base de datos.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(2539).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"3.- Una vez creada la BBDD, pulse sobre el enlace de la ficha y deber\xe1 aparecerle una ficha, a continuaci\xf3n seleccione la pesta\xf1a ",(0,r.kt)("strong",{parentName:"p"},"variables"),".\nUna vez seleccionada la pesta\xf1a, deber\xe1 copiar el contenio de las siguientes variables:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"MYSQLDATABASE\nMYSQLHOST\nMYSQLPASSWORD\nMYSQLPORT\nMYSQL_DATABASE\n")),(0,r.kt)("p",null,"Guarde estas variables, en cualquier lugar accesible pues haremos uso de ellas m\xe1s tarde."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(3285).Z,width:"1360",height:"768"})),(0,r.kt)("h3",{id:"creaci\xf3n-de-la-aplicaci\xf3n"},"Creaci\xf3n de la aplicaci\xf3n"),(0,r.kt)("p",null,"Antes de continuar, deber\xe1 de disponer de un repositorio en ",(0,r.kt)("strong",{parentName:"p"},"Github"),", si usted no conoce ",(0,r.kt)("strong",{parentName:"p"},"git")," y ",(0,r.kt)("strong",{parentName:"p"},"gitub")," le recomiendo seguir uno de los muchos tutoriales que existen en Internet."),(0,r.kt)("p",null,"Pulse sobre el icono del tren y deber\xe1 aparecerle un pantalla similar a la siguiente:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(9178).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"Pulse el bot\xf3n ",(0,r.kt)("strong",{parentName:"p"},"New Project")," deber\xe1 aparecerse una p\xe1gina como la siguiente:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(2433).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"Selecciona ",(0,r.kt)("strong",{parentName:"p"},"Deploy from GitHub repo"),". Suponiendo que es tu primer despliegue en ",(0,r.kt)("strong",{parentName:"p"},"RailWay"),", deber\xe1s seleccionar la opci\xf3n ",(0,r.kt)("strong",{parentName:"p"},"Configured GitHub"),". Esta opci\xf3n es muy \xfatil, ya que no solo desplegar\xe1 nuestra aplicaci\xf3n por primera vez, sino que tambi\xe9n se volver\xe1 a desplegar autom\xe1ticamente cada vez que hagamos cambios en nuestro repositorio. A esto se le llama integraci\xf3n continua. Se nos pedir\xe1 nuestra contrase\xf1a de acceso a ",(0,r.kt)("strong",{parentName:"p"},"GitHub")," y que le demos permisos de acceso a ",(0,r.kt)("strong",{parentName:"p"},"Railway")," a nuestro repositorio "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(4702).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(474).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"A continuaci\xf3n se nos pedir\xe1 que selccionemos un repositorio. Existen dos opciones, o seleccionarlos o todos o uno concreto. Escoja su proyecto."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(7206).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"Una vez seccionada la opci\xf3n adecuada, nos aparecer\xe1 la siguiente pantalla:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(6642).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"A\xfan no vamos a desplegar la aplicaci\xf3n; todav\xeda necesitamos especificar las variables de entorno. Selecciona ",(0,r.kt)("strong",{parentName:"p"},"Add Variables"),". En la siguiente pantalla, haz clic en ",(0,r.kt)("strong",{parentName:"p"},"cancelar"),", porque de lo contrario tendr\xedamos que introducirlas una por una. En la siguiente pantalla escoja la pesta\xf1a ",(0,r.kt)("strong",{parentName:"p"},"variables"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(1627).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"Escoja la opci\xf3n ",(0,r.kt)("strong",{parentName:"p"},"RAW Editor"),"."),(0,r.kt)("p",null,"En la ventana modal emergente, copie el contenido de su archivo .env que se encuentra en la ra\xedz del proyecto y p\xe9guelo. "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(7567).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"A continuaci\xf3n debemos cambiar el contenido de ciertas variables:"),(0,r.kt)("admonition",{title:"variables de entorno",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"APP_NAME=",(0,r.kt)("strong",{parentName:"p"},"Nombre de su aplicaci\xf3n")),(0,r.kt)("p",{parentName:"admonition"},"APP_ENV=production"),(0,r.kt)("p",{parentName:"admonition"},"APP_DEBUG=false"),(0,r.kt)("p",{parentName:"admonition"},"APP_URL=",(0,r.kt)("strong",{parentName:"p"},"Poner despu\xe9s del despliegue"))),(0,r.kt)("p",null,"Los valores en negrita  indican que estos valores deben ser especificados por usted seg\xfan sus necesidades. El ",(0,r.kt)("strong",{parentName:"p"},"APP_URL")," debe ser rellanado una vez conozcamos el dominio asignado por ",(0,r.kt)("strong",{parentName:"p"},"RailWay"),".\nRecuerda que unos pasos atr\xe1s le indique que guardara los valores de ciertas valores de valores de entorno, estos se ver\xedan algo as\xed:"),(0,r.kt)("admonition",{title:"Variables de conexi\xf3n BBDD",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"MYSQLDATABASE=",(0,r.kt)("strong",{parentName:"p"},"xxxxxxxxxxxxxx")),(0,r.kt)("p",{parentName:"admonition"},"MYSQLHOST=",(0,r.kt)("strong",{parentName:"p"},"xxxxxxx")),(0,r.kt)("p",{parentName:"admonition"},"MYSQLPASSWORD=",(0,r.kt)("strong",{parentName:"p"},"xxxx")),(0,r.kt)("p",{parentName:"admonition"},"MYSQLPORT=",(0,r.kt)("strong",{parentName:"p"},"xxxxxxxxx")),(0,r.kt)("p",{parentName:"admonition"},"MYSQLUSER=",(0,r.kt)("strong",{parentName:"p"},"xxxx"))),(0,r.kt)("p",null,"A continuaci\xf3n debe cambiar las siguientes variables con el valor de las variables de conexi\xf3n antes expuestas:"),(0,r.kt)("admonition",{title:"variables de conexi\xf3n de la app",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"DB_CONNECTION=mysql"),(0,r.kt)("p",{parentName:"admonition"},"DB_HOST==>MYSQLHOST"),(0,r.kt)("p",{parentName:"admonition"},"DB_PORT=>MYSQLPORT"),(0,r.kt)("p",{parentName:"admonition"},"DB_DATABASE=>MYSQLDATABASE"),(0,r.kt)("p",{parentName:"admonition"},"DB_USERNAME=>MYSQLUSER"),(0,r.kt)("p",{parentName:"admonition"},"DB_PASSWORD=>MYSQLPASSWORD")),(0,r.kt)("p",null,"A continuaci\xf3n y al final del ",(0,r.kt)("strong",{parentName:"p"},"Raw edito4")," debajo de todas las variables debe introducir el siguiente c\xf3digo literal:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"NIXPACKS_BUILD_CMD=composer install && npm i && npm run build && php artisan optimize && php artisan config:cache &&  php artisan route:cache && php artisan view:cache && php artisan migrate:fresh --seed --force\n")),(0,r.kt)("p",null,"Si observas atentamente estas instrucciones, notar\xe1s que son las mismas que utilizar\xedas para iniciar el proyecto. La instrucci\xf3n php artisan migrate:fresh --seed --force inicializa la base de datos, ejecuta las migraciones y los seeders. Por lo tanto, deber\xe1s modificarla en despliegues posteriores si ya tienes datos. Modif\xedcala en ese caso si no quieres que la base de datos se inicialice en cada nuevo despliegue."),(0,r.kt)("p",null,"Una vez ya definidas las variables de entorno, ya puede comenzar a realizar el despliegue. Pulse sobre el boton ",(0,r.kt)("strong",{parentName:"p"},"Deploy"),". Justo en este momento comenzara el despliegue esta proceso, pude tardar varios minutos."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(9392).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"Si todo ha ido bien en la pesta\xf1a ",(0,r.kt)("strong",{parentName:"p"},"Deploy")," nos deber\xe1 aparecer una pantalla similar a la siguiente:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(2765).Z,width:"1360",height:"768"})),(0,r.kt)("p",null,"Ya casi hemos terminado, solo quedan un par de pasos. Vaya a la pesta\xf1a ",(0,r.kt)("strong",{parentName:"p"},"Settings")," y en la opci\xf3n ",(0,r.kt)("strong",{parentName:"p"},"Public networking")," pulse el bot\xf3n ",(0,r.kt)("strong",{parentName:"p"},"Generate Domain"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(9033).Z,width:"1366",height:"773"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(1253).Z,width:"1369",height:"775"})),(0,r.kt)("p",null,"Vuelva a la pesta\xf1a de ",(0,r.kt)("strong",{parentName:"p"},"Deployments")," y pulse sobre el enlace. Deber\xeda aparecer la pantalla de presentaci\xf3n Laravel."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Railway",src:t(4859).Z,width:"1372",height:"782"})))}u.isMDXComponent=!0},223:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway1-b5e2f90853027bd0057fc1750e013232.png"},1627:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway10-d916f41c3c34c6d4408d5a18e00df6dd.png"},7567:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway11-69fce6b22983e5c36d1b04a481844f0e.png"},9392:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway12-520acba3bf3600a2cc127af59ef52ed9.png"},2765:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway14-0bb6f8ad5ca1fd39d9d13cc1e3faf958.png"},9033:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway15-fc0ff8803a56b6645a1f3e5f8f86610f.png"},1253:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway16-8a941f268e8f28347dd3d53aab7bcc4f.png"},4859:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway18-2719f70120ab0aee12a16601aadf711e.png"},2539:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway2-689d68ea44795edb637849bcfcba3445.png"},3285:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway3-c3185db2bb62d88c5f75dc9ea00e8d3b.png"},9178:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway4-fe8e2bd23c86cc0d9b2e866f58f658ef.png"},2433:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway5-aa7482ca21cf1637e34977c42e8c445a.png"},4702:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway6-88076f1c3fb95bbfaf13031b8257b70f.png"},474:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway7-2549438395fb1576f1f4ea3af79f5185.png"},7206:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway8-c35337e41c89193dd8e366a592d8b94d.png"},6642:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/railway9-ba8fb8ba70b193512198d4a869ff4b93.png"}}]);